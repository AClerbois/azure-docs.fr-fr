---
title: Analyseurs des vulnérabilités des partenaires dans Azure Security Center
description: Azure Security Center prend en charge l’intégration de solutions tierces d’évaluation des vulnérabilités. Cet article explique comment configurer ces outils.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/13/2019
ms.author: memildin
ms.openlocfilehash: ac68e5a91f72954ce54892f22ab5ba3a7a593bbf
ms.sourcegitcommit: 50ef5c2798da04cf746181fbfa3253fca366feaa
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/30/2020
ms.locfileid: "82611430"
---
# <a name="deploying-a-partner-vulnerability-scanning-solution"></a>Déploiement d’une solution d’analyse des vulnérabilités des partenaires

Si vous utilisez le niveau standard, vous pouvez utiliser l’outil d’évaluation des vulnérabilités intégré d’Azure Security Center, comme décrit dans [Analyseur de vulnérabilité intégré pour machines virtuelles](built-in-vulnerability-assessment.md). Cet outil ne nécessite pas de licence Qualys ni même de compte Qualys : tout est traité de manière fluide dans Security Center.

Vous pouvez également déployer votre propre solution d’évaluation des vulnérabilités sous licence privée proposée par [Qualys](https://www.qualys.com/lp/azure) ou [Rapid7](https://www.rapid7.com/products/insightvm/). Vous pouvez installer l’une de ces solutions de partenaires sur plusieurs machines virtuelles qui appartiennent au même abonnement.

## <a name="configuring-a-partner-solution-in-the-azure-portal"></a>Configuration d’une solution de partenaire (dans le portail Azure)

1. Dans le tableau de bord **Centre de sécurité**, dans la section **Vue d’ensemble**, cliquez sur **Recommandations**.

1. Dans la page **Recommandations**, sélectionnez **La solution d'évaluation des vulnérabilités doit être installée sur vos machines virtuelles**.

    ![Évaluation des vulnérabilités](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig1-new.png)

1. Dans la page **La solution d'évaluation des vulnérabilités doit être installée sur vos machines virtuelles**, sélectionnez les machines virtuelles sur lesquelles installer la solution d’évaluation des vulnérabilités.

    ![Ajouter une solution d’évaluation des vulnérabilités](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig2-new.png)

1. Dans la page **La solution d'évaluation des vulnérabilités doit être installée sur vos machines virtuelles**, cliquez sur **Installer sur les machines virtuelles 2** (le nom varie en fonction du nombre de machines virtuelles sélectionnées) :

    ![Ajouter une évaluation des vulnérabilités](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig3-new.png)

1. Vous pouvez créer une évaluation des vulnérabilités ou utiliser une solution actuelle. Si vous créez une évaluation des vulnérabilités, vous pouvez sélectionner une solution de partenaire dans la **Place de marché Azure**. Ou, sous **Utiliser une solution existante**, sélectionnez **Qualys** ou **Rapid7**.

    Pour déployer un agent à partir de Security Center, vous avez besoin d’un code de licence et d’une clé publique du fournisseur. Pour savoir comment récupérer le code de licence et la clé publique, consultez la [documentation Qualys](https://community.qualys.com/docs/DOC-5823-deploying-qualys-cloud-agents-from-microsoft-azure-security-center) ou la [documentation Rapid7](https://insightvm.help.rapid7.com/docs/azure-security-center).


1. Pour créer une nouvelle évaluation, cliquez sur **Créer nouveau**. La page de **gestion des vulnérabilités** du partenaire s’ouvre. Les options affichées dans cette page peuvent varier en fonction du partenaire.

    ![Créer une solution d’évaluation des vulnérabilités](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig4-new.png)

    Pour configurer Qualys (par exemple), sélectionnez **Qualys** puis :
    
    1. Pour **Groupe de ressources**, sélectionnez **Use existing** (Utiliser existant).
    
    1. Pour **Emplacement**, sélectionnez l’emplacement géographique de la solution.
    
    1. Dans le champ **License code (Code de licence)** (propre à Qualys), entrez le numéro de licence fourni par le partenaire.
    
    1. Dans la zone **Public key (Clé publique)** (propre à Qualys), entrez les informations de clé publique fournies par le partenaire.
    
    1. Pour installer automatiquement un agent d’évaluation des vulnérabilités sur toutes les machines virtuelles détectées dans l’abonnement de cette solution Qualys, cochez la case **Mettre à jour automatiquement**.
    
    1. Cliquez sur **OK**.


## <a name="configuring-a-partner-solution-using-powershell-and-the-rest-api"></a>Configuration d’une solution de partenaire (avec PowerShell et l’API REST)

Pour déployer programmatiquement votre propre solution d’évaluation des vulnérabilités sous licence privée proposée par [Qualys](https://www.qualys.com/lp/azure) ou [Rapid7](https://www.rapid7.com/products/insightvm/), utilisez le script fourni [PowerShell > Solution de vulnérabilité](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). 

Ce script utilise l’API REST pour créer une nouvelle solution de sécurité dans ASC. Cette solution nécessite une licence et une clé fournie par le fournisseur de services : Qualys ou Rapid7.

> [!IMPORTANT] 
> Une seule solution peut être créée par licence. Toute tentative de création d’une autre solution avec les mêmes nom, licence ou clé échouera.

### <a name="prerequisites"></a>Prérequis

Modules PowerShell nécessaires :

- Install-module Az
- Install-module Az.security

### <a name="running-the-script"></a>Exécution du script

Pour exécuter le script, vous avez besoin des informations appropriées pour les paramètres ci-dessous.

| **Paramètre** | **Obligatoire** | **Remarques** |
|----|:----:|----|
|**SubscriptionId**|✔|Identificateur subscriptionID de l’abonnement Azure qui contient les ressources que vous souhaitez analyser.|
|**ResourceGroupName**|✔|Nom du groupe de ressources. Utilisez n’importe quel groupe de ressources existant, y compris le groupe par défaut (« DefaultResourceGroup-xxx »). Comme la solution n’est pas une ressource Azure, elle ne figure pas sous le groupe de ressources, mais elle lui est toutefois attachée.|
|**vaSolutionName**|✔|Nom de la nouvelle solution.|
|**vaType**|✔|Qualys ou Rapid7.|
|**licenceCode**|✔|Chaîne de licence fournie par le fournisseur.|
|**publicKey**|✔|Clé publique fournie par le fournisseur.|
|**autoUpdate**|-|Activez (true) ou désactivez (false) le déploiement automatique pour cette solution d’évaluation des vulnérabilités. Lorsque cette option est activée, chaque nouvelle machine virtuelle de l’abonnement tente automatiquement de créer un lien vers la solution.<br/>(Par défaut : False)|


Syntaxe :

```
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Exemple (cet exemple n’inclut pas de détails de licence valides) :

```
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```


## <a name="review-the-recommendation"></a>Passer en revue la recommandation
Une fois la solution d’évaluation des vulnérabilités installée sur la machine virtuelle cible, Azure Security Center analyse cette dernière pour détecter et identifier les vulnérabilités de l’application et du système.

> [!NOTE]
> La première analyse peut durer jusqu'à deux heures. Par la suite, elle a lieu toutes les heures.

Les problèmes détectés sont visibles sous **Virtual Machines Recommendations (Recommandations relatives aux machines virtuelles)** .

## <a name="next-steps"></a>Étapes suivantes

Cet article a décrit l’outil d’évaluation des vulnérabilités intégré fourni par Qualys pour analyser vos machines virtuelles. Pour des informations connexes, consultez les articles suivants :

- [En savoir plus sur les différents éléments d’une recommandation](security-center-recommendations.md)
- [Découvrez comment appliquer les recommandations](security-center-remediate-recommendations.md)