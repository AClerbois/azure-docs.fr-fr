---
title: Évaluation des vulnérabilités SQL - Azure SQL Database | Microsoft Docs
description: Découvrez comment configurer l’évaluation des vulnérabilités SQL sur SQL Database et interpréter les rapports d’évaluation.
services: sql-database
author: ronitr
manager: craigg
ms.service: sql-database
ms.topic: conceptual
ms.date: 05/17/2018
ms.author: ronitr
ms.reviewer: carlrab
ms.openlocfilehash: 031ba903e24530975156976c0f0bbcc985c670d1
ms.sourcegitcommit: 1aedb52f221fb2a6e7ad0b0930b4c74db354a569
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/17/2018
ms.locfileid: "42141701"
---
# <a name="sql-vulnerability-assessment"></a>Évaluation des vulnérabilités SQL

L’évaluation des vulnérabilités SQL est un service simple à configurer, qui vous permet de découvrir, suivre et vous aide à corriger des vulnérabilités de base de données potentielles. Utilisez-le pour améliorer de façon proactive la sécurité de votre base de données. 

L’évaluation des vulnérabilités fait partie de l’offre [SQL Advanced Threat Protection](sql-advanced-threat-protection.md) (ATP) qui est un package unifié de fonctionnalités de sécurité SQL avancées. L’évaluation des vulnérabilités peut être accessible et gérée via le portail SQL ATP central.

## <a name="what-is-vulnerability-assessment"></a>Qu’est-ce que l’évaluation des vulnérabilités ?
Évaluation des vulnérabilités SQL (VA) est un service qui offre une visibilité de votre état de sécurité et inclut des mesures pratiques pour résoudre les problèmes de sécurité et améliorer la sécurité de votre base de données. Il vous permet de :  
- Répondre aux exigences de conformité qui nécessitent des rapports d’analyse de base de données.  
- Répondre aux normes de confidentialité strictes.  
- Surveiller un environnement de base de données dynamique où les modifications sont difficiles à suivre.  

VA est un service d’analyse intégré au service Azure SQL Database. Le service s’appuie sur une base de connaissances de règles qui signale les vulnérabilités de sécurité et met en surbrillance les écarts par rapport aux meilleures pratiques, notamment les erreurs de configuration, les autorisations excessives et les données sensibles non protégées. Les règles sont basées sur les meilleures pratiques de Microsoft et se concentrent sur les problèmes de sécurité qui présentent des risques majeurs pour votre base de données et ses précieuses données. Elles couvrent les problèmes au niveau de la base de données ainsi que les problèmes de sécurité au niveau du serveur, comme les paramètres de pare-feu serveur et les autorisations au niveau du serveur. Ces règles représentent également les nombreuses exigences à respecter, provenant de différents organismes de réglementation.  

Les résultats de l’analyse incluent les mesures pratiques permettant de résoudre chaque problème et proposent des scripts de correction personnalisés, le cas échéant. Un rapport d’évaluation peut être personnalisé selon votre environnement, en définissant une ligne de base acceptable pour les configurations d’autorisations, les configurations de fonctionnalités et les paramètres de la base de données.   

## <a name="implementing-va"></a>Implémentation de VA  
Les étapes suivantes implémentent VA sur SQL Database.  

## <a name="1-run-a-scan"></a>1. Exécuter une analyse  
Prenez en main VA en accédant à **Advanced Threat Protection** sous l’en-tête Sécurité du volet Azure SQL Database. Cliquez pour activer la protection avancée contre les menaces, puis cliquez sur la carte **Évaluation des vulnérabilités** qui ouvre automatiquement la carte de paramètres de l’évaluation des vulnérabilités. 

Commencez par configurer un compte de stockage où seront stockés les résultats de l’analyse. Pour plus d’informations sur les comptes de stockage, voir [À propos des comptes Azure Storage](../storage/common/storage-create-storage-account.md). Une fois le stockage configuré, cliquez sur **Analyser** pour rechercher d’éventuelles vulnérabilités dans votre base de données.
  
![Analyser une base de données](./media/sql-vulnerability-assessment/pp_va_initialize.png)  
  > [!NOTE]   
  > L’analyse est une opération légère et sûre. C’est une opération totalement en lecture seule qui ne dure que quelques secondes. Elle n’entraîne aucune modification de votre base de données.  

## <a name="2-view-the-report"></a>2. Afficher le rapport  
Lorsque votre analyse est terminée, votre rapport d’analyse apparaît automatiquement dans le portail Azure. Le rapport présente une vue d’ensemble de l’état de la sécurité et indique le nombre de problèmes détectés ainsi que leur niveau de gravité respectif. Les résultats incluent des avertissements sur des écarts par rapport aux meilleures pratiques et un instantané de vos paramètres relatifs à la sécurité, comme les principaux et rôles de base de données et leurs autorisations associées. Le rapport d’analyse fournit également un mappage de données sensibles détectées dans votre base de données et comprend des suggestions pour classer ces données à l’aide de [Data Discovery & Classification](sql-database-data-discovery-and-classification.md) (Découverte et classification des données). 
 
![Afficher le rapport](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

## <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analyser les résultats et résoudre les problèmes  
Passez en revue vos résultats et identifiez ceux qui constituent de véritables problèmes de sécurité dans votre environnement. Explorez chaque résultat ayant entraîné un échec pour comprendre son impact et pourquoi chaque vérification de sécurité a échoué. Pour résoudre le problème, effectuez les mesures de correction fournies par le rapport.  

![Analyser le rapport](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)    

## <a name="4-set-your-baseline"></a>4. Définir votre ligne de base  
Lorsque vous examinez les résultats de votre évaluation, vous pouvez définir certains résultats spécifiques comme *ligne de base acceptable* dans votre environnement. La ligne de base est essentiellement une personnalisation de la façon dont les résultats sont signalés. Les résultats qui correspondent à la ligne de base seront validés dans les analyses ultérieures. Une fois que l’état de sécurité de votre ligne de base a été défini, VA signale uniquement les écarts par rapport à cette ligne de base, et vous pouvez alors vous concentrer sur les problèmes pertinents.  

![Définir votre ligne de base](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

## <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Exécuter une nouvelle analyse pour afficher votre rapport de suivi personnalisé  
Après avoir terminé la configuration des **lignes de base de votre règle**, exécutez une nouvelle analyse pour afficher le rapport personnalisé. VA signale désormais uniquement les problèmes de sécurité qui s’écartent de votre état de ligne de base approuvé. 
 
![Afficher votre rapport personnalisé](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

VA peut maintenant être utilisé pour vérifier que votre base de données conserve en permanence un haut niveau de sécurité et que les stratégies de votre entreprise sont respectées. Si des rapports de conformité sont requis, les rapports VA sont utiles pour faciliter le processus de mise en conformité.  

## <a name="6-set-up-periodic-recurring-scans"></a>6. Configurer des analyses récurrentes
Accédez aux paramètres d’évaluation des vulnérabilités pour activer les **analyses récurrentes périodiques**. Cela permet de configurer l’évaluation des vulnérabilités pour exécuter automatiquement une analyse sur votre base de données une fois par semaine. Un résumé de résultats d’analyse est envoyé aux adresses e-mail que vous fournissez.

![Afficher votre rapport personnalisé](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

## <a name="7---export-an-assessment-report"></a>7.   Exporter un rapport d’évaluation
Cliquez sur **Export Scan Results** (Exporter les résultats d’analyse) pour créer un rapport Excel téléchargeable de résultat de votre analyse. Ce rapport contient un onglet de résumé qui affiche un résumé de l’évaluation, y compris tous les contrôles qui ont échoué. Il inclut également un onglet de **résultats** contenant l’ensemble complet de résultats de l’analyse, y compris tous les contrôles qui ont été exécutés et les détails de résultat de chacun. 

## <a name="8---view-scan-history"></a>8.   Afficher l’historique d’analyse
Cliquez sur **Historique d’analyse** dans le volet VA pour afficher un historique de toutes les analyses précédemment exécutées sur cette base de données. Sélectionnez une analyse particulière dans la liste pour afficher les résultats détaillés de cette analyse.

VA peut maintenant être utilisé pour vérifier que votre base de données conserve en permanence un haut niveau de sécurité et que les stratégies de votre entreprise sont respectées. Si des rapports de conformité sont requis, les rapports VA sont utiles pour faciliter le processus de mise en conformité.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Gérer les évaluations des vulnérabilités à l’aide d’Azure PowerShell

Vous pouvez utiliser les applets de commande Azure PowerShell pour gérer par programmation l’évaluation des vulnérabilités. Les applets de commande prises en charge sont les suivantes :

* [Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) : met à jour les paramètres d’évaluation des vulnérabilités d’une base de données
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) : retourne les paramètres d’évaluation des vulnérabilités d’une base de données
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) : efface les paramètres d’évaluation des vulnérabilités d’une base de données
* [Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) : définit la règle de base d’évaluation des vulnérabilités.
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) : obtient la règle de base d’évaluation des vulnérabilités.
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) : efface la règle de base d’évaluation des vulnérabilités. D’abord, définissez la règle de base avant d’utiliser cette applet de commande pour la supprimer.
* [Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) : déclenche le démarrage d’une analyse d’évaluation des vulnérabilités.
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord?view=azurermps-6.6.0) : obtient les enregistrements de toutes les analyses d’évaluation des vulnérabilités qui sont associés à une base de données.
* [Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) : convertit les résultats de l’analyse d’évaluation des vulnérabilités en un fichier Excel.


Pour obtenir un exemple de script, consultez [Azure SQL Vulnerability Assessment PowerShell support](https://blogs.msdn.microsoft.com/sqlsecurity/2018/08/02/azure-sql-vulnerability-assessment-now-with-powershell-support/).


## <a name="next-steps"></a>Étapes suivantes  

- En savoir plus sur [SQL Advanced Threat Protection](sql-advanced-threat-protection.md)
- En savoir plus sur [Data Discovery & Classification](sql-database-data-discovery-and-classification.md) (Découverte et classification des données)
