---
title: Architecture de référence pour Azure DevTest Labs pour une entreprise
description: Cet article fournit un guide d’architecture de référence pour Azure DevTest Labs dans une entreprise.
services: devtest-lab,virtual-machines,lab-services
documentationcenter: na
author: spelluru
manager: femila
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/12/2019
ms.author: spelluru
ms.reviewer: christianreddington,anthdela,juselph
ms.openlocfilehash: bcb154f7cffb92ef23fc2606e1f604bb12f8d1a3
ms.sourcegitcommit: bf509e05e4b1dc5553b4483dfcc2221055fa80f2
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/22/2019
ms.locfileid: "59996609"
---
# <a name="azure-devtest-labs---reference-architecture-for-an-enterprise"></a>Azure dev/test-architecture de référence pour une entreprise
Cet article fournit une architecture de référence pour le déploiement d’une solution basée sur Azure DevTest Labs dans une entreprise. Il inclut la connectivité locale via Express Route, une passerelle des services Bureau à distance à la connexion à distance sur des machines virtuelles, la connectivité à un référentiel d’artefacts pour les artefacts privés et d’autres services PaaS utilisés dans un laboratoire.

![Architecture de référence](./media/devtest-lab-reference-architecture/reference-architecture.png)

## <a name="architecture"></a>Architecture
Les éléments clés dans l’architecture de référence sont :

- **Azure Active Directory (AAD)**: Azure DevTest Labs utilise le [service Azure Active Directory pour la gestion des identités](../active-directory/fundamentals/active-directory-whatis.md). Il existe deux éléments clés à prendre en compte en fournissant un accès à un environnement basé sur DevTest Labs pour les utilisateurs :
    - **Gestion des ressources**:  Il fournit un accès au portail Azure pour gérer les ressources (créer des machines virtuelles, créer des environnements, démarrage/arrêt/redémarrage/delete/applyartifacts et ainsi de suite). Cela s’opère dans Azure à l’aide du contrôle d’accès en fonction du Roble (RBAC) et en appliquant une attribution de rôle pour l’utilisateur, les ressources de paramètre et les autorisations au niveau d’accès.
    - **Machines virtuelles (au niveau du réseau)**:  Dans la configuration par défaut, les machines virtuelles utilisent un compte d’administrateur local.  Si un domaine est disponible ([les services de domaine AAD](../active-directory-domain-services/active-directory-ds-overview.md), un domaine local ou un domaine basé sur le cloud), les machines peuvent être joints au domaine. Une fois joint, utilisateurs utilisent leurs identités basés sur un domaine pour se connecter aux machines virtuelles.
- **Connectivité locale**: Dans le diagramme d’architecture ci-dessus, [Express Route](../expressroute/expressroute-introduction.md) i utilisé, mais vous pouvez également utiliser un [VPN de Site à Site](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md). Bien qu’il n’est pas nécessaire de DevTest Labs, il se produit souvent dans les entreprises. Il est obligatoire uniquement s’il existe une raison pour se connecter aux ressources d’entreprise. Causes courantes sont : 
    - Données locales ne peuvent pas encore être déplacées vers le cloud
    - Préférence pour joindre les machines virtuelles du laboratoire pour le domaine local
    - Forcer tout le trafic réseau entrant et sortant de l’environnement de cloud via un pare-feu local pour des raisons de sécurité et de conformité
- **Groupes de sécurité réseau** : Une méthode courante pour limiter le trafic vers l’environnement de cloud (ou dans l’environnement de cloud) en fonction de la source et d’adresses IP de destination consiste à utiliser un [groupe de sécurité réseau](../virtual-network/security-overview.md). Par exemple, en autorisant uniquement le trafic réseau provenant du réseau d’entreprise dans des réseaux du laboratoire.
- **Passerelle des services Bureau à distance**:  En général, les entreprises bloquent sortant les connexions Bureau à distance au niveau du pare-feu d’entreprise. Pour activer la connectivité à l’environnement en nuage dans DevTest Labs, il existe plusieurs options, comme utiliser un [passerelle des services Bureau à distance](/windows-server/remote/remote-desktop-services/desktop-hosting-logical-architecture) (liste verte l’adresse IP statique pour l’équilibrage de charge de passerelle) ou [diriger tout trafic entrant Le trafic RDP](../vpn-gateway/vpn-gateway-forced-tunneling-rm.md) via la connexion VPN de routage/Site à Site Express. Il est commun en considération lorsque vous planifiez un déploiement de DevTest Labs dans l’entreprise.
- **Mise en réseau Azure (réseaux virtuels, sous-réseaux)**:  Le [mise en réseau Azure](../networking/networking-overview.md) topologie est un autre élément clé dans l’architecture globale de dev/test. Il permet à des ressources à partir de laboratoires pour communiquer (ou non), accès au niveau local (ou pas) et l’accès à internet (ou pas). Le diagramme d’architecture inclut la méthode la plus courante de clients utilisent DevTest Labs (tous les laboratoires sont connectés via [homologation](../virtual-network/virtual-network-peering-overview.md) à l’aide un [modèle hub-spoke](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke) à la connexion VPN de routage/Site à Site Express au niveau local), mais depuis dev/test utilise la mise en réseau Azure directement il n’existe aucune restriction sur la façon de configurer l’infrastructure de mise en réseau.
- **Dev/test**:  Dev/test est une partie essentielle de l’architecture globale. Pour en savoir plus sur le service, consultez [sur dev/test](devtest-lab-overview.md).
- **Machines virtuelles et autres ressources (SaaS, PaaS, IaaS)**:  Une des charges de travail clés pris en charge par dev/test sont des machines virtuelles, ainsi que d’autres ressources Azure.  Dev/test rend facile et rapide pour une entreprise donner accès aux ressources Azure (y compris les Machines virtuelles et autres ressources Azure).  En savoir plus sur l’accès à Azure pour [développeurs](devtest-lab-developer-lab.md) et [testeurs](devtest-lab-test-env.md).

## <a name="scalability-considerations"></a>Considérations relatives à l’extensibilité
Bien que dev/test n’a pas les quotas intégrés ou des limites, autres ressources Azure sont utilisés dans le standard ont des opérations d’un laboratoire [quotas du niveau d’abonnement](../azure-subscription-service-limits.md). Par conséquent, dans un déploiement standard de l’entreprise, vous devez disposer de plusieurs abonnements Azure pour couvrir un large déploiement de dev/test. Les quotas atteintes plus couramment par les entreprises sont :

- **Groupes de ressources** :  Dans la configuration par défaut, DevTest Labs crée un groupe de ressources pour chaque nouvel ordinateur virtuel ou d’un environnement créé par un utilisateur à l’aide du service. Les abonnements peuvent contenir un [maximal de groupes de ressources 980](../azure-subscription-service-limits.md#subscription-limits---azure-resource-manager), de sorte que cette limite est la limite supérieure des machines virtuelles et les environnements dans un abonnement. Il existe deux autres configurations que vous devez envisager :
    - **[Accédez de toutes les machines virtuelles au même groupe de ressources](resource-group-control.md)**:  Bien qu’il vous aide à la limite de groupe de ressources, il a un impact sur le type de ressource par limite de groupe de ressources.
    - **À l’aide de partagé à des adresses IP publiques**:  Toutes les machines virtuelles de la même taille et la même région placés dans le même groupe de ressources. Il est « milieu » entre les quotas de groupes de ressources et le type de ressource par les quotas de groupes de ressources si les machines virtuelles sont autorisés à avoir des adresses IP publiques. 
- **Groupement de ressources par ressource par Type de ressource**: La limite par défaut pour [ressources par groupe de ressources par Type de ressource est de 800](../azure-subscription-service-limits.md#resource-group-limits).  Lorsque toutes les machines virtuelles à l’aide de passer à la même configuration de groupe de ressources, les utilisateurs atteindra cette limite d’abonnement beaucoup plus tôt, en particulier si les machines virtuelles présentent de nombreux disques supplémentaires.
- **Comptes de stockage** : Un laboratoire dans DevTest Labs est fourni avec un compte de stockage et le quota Azure pour [nombre de comptes de stockage par région et par abonnement est de 250](../azure-subscription-service-limits.md#storage-limits). Cela signifie que la limite supérieure pour le nombre de dev/test dans la même région est également 250.
- **Attributions de rôles**: Une attribution de rôle est comment accorder à un utilisateur ou principal de l’accès à une ressource (propriétaire, ressource, niveau d’autorisation). Dans Azure, il un [limite de 2000 attributions de rôles par abonnement](../azure-subscription-service-limits.md#role-based-access-control-limits). Le service DevTest Labs (dans la configuration par défaut) crée un groupe de ressources pour chaque machine virtuelle et le propriétaire sera accordé le **propriétaire** autorisation pour la machine virtuelle DevTest Labs et **lecteur** autorisé au groupe de ressources.  De cette façon, chaque nouvelle machine virtuelle créée utilise deux attributions de rôles supplémentaires pour les attributions de rôles créées lorsque vous autorisez les utilisateurs à l’atelier.
- **API lectures/écritures**: Il existe différentes façons (API REST, PowerShell, CLI, Kit de développement et ainsi de suite) pour automatiser Azure et dev/test et de l’automatisation, il est possible d’atteindre une autre limite de demandes d’API. Chaque abonnement autorise un maximum de [12000 lire de demandes par heure d’écriture de demandes et 1200](../azure-resource-manager/resource-manager-request-limits.md).  Il existe une limite à connaître lors de l’automatisation de DevTest Labs.

## <a name="manageability-considerations"></a>Considérations relatives à la facilité de gestion
DevTest Labs a une interface utilisateur d’administration exceptionnelles lorsque vous travaillez avec un même laboratoire. Dans une entreprise, il existe probablement plusieurs abonnements Azure et nombreux laboratoires. Il signifie qu’apporter des modifications à tous les laboratoires constamment nécessite des scripts/automation.  Voici quelques exemples et les meilleurs moyens de gérer le déploiement de dev/test :

- **Modifications apportées aux paramètres de lab**: Un scénario courant consiste à mettre à jour d’un paramètre de laboratoire spécifiques sur tous les laboratoires dans le déploiement. Par exemple, une nouvelle taille d’instance de machine virtuelle est disponible et tous les laboratoires doivent être mis à jour pour l’autoriser.  Il est préférable automatiser ces modifications à l’aide de scripts Azure PowerShell, Azure CLI ou API REST.  
- **Jeton d’accès personnel artefact référentiel**:  En règle générale, les jetons d’accès personnels pour un dépôt Git expirent (90 jours, 1 an, 2 ans). Pour garantir la continuité des activités, il est important étendre le jeton d’accès personnel ou créez-en un et pour utiliser automation pour appliquer le nouveau jeton d’accès personnel à tous les laboratoires.
- **Restriction des modifications à un paramètre de laboratoire**:  Il est souvent le cas où il existe un paramètre particulier (par exemple, ce qui permet la place de marché les Images à utiliser) qui doit être restreint. Elle peut être effectuée via la stratégie Azure (empêchant la modification de ce type de ressource) ou en créant un rôle personnalisé et de l’octroi de ce rôle au lieu de « propriétaire » au laboratoire. Il est possible pour la plupart des paramètres dans le laboratoire (prise en charge interne, annonce du Lab, les tailles autorisées de machine virtuelle et ainsi de suite)
- **Nécessitant des machines virtuelles suivent une convention d’affectation de noms**: Il est une demande courante pour identifier facilement les machines virtuelles qui font partie de l’environnement de test et développement basé sur le cloud. Vous pouvez le faire [avec Azure Policy](https://github.com/Azure/azure-policy/tree/master/samples/TextPatterns/allow-multiple-name-patterns).

Il est important de noter que DevTest Labs utilise les ressources sous-jacentes dans Azure (mise en réseau, disques, calcul, etc.) qui sont gérés de la même façon dans Azure.  Par exemple, Azure stratégie s’applique aux ordinateurs virtuels créés dans un laboratoire. Le centre de sécurité Azure peut signaler sur la conformité de la machine virtuelle. Le Service de sauvegarde Azure peut fournir des sauvegardes régulières pour les machines virtuelles dans le laboratoire et ainsi de suite. 

## <a name="security-considerations"></a>Considérations relatives à la sécurité
Azure DevTest Labs utilise les ressources existantes dans Azure (calcul, mise en réseau et ainsi de suite) et par conséquent automatiquement tire parti de toutes les fonctionnalités de sécurité intégrées à la plateforme. Par exemple, pour sécuriser les connexions Bureau à distance entrantes uniquement provenir du réseau d’entreprise, il est aussi simple que l’ajout d’un groupe de sécurité réseau au réseau virtuel sur la passerelle des services Bureau à distance. La considération de sécurité supplémentaire uniquement pour Azure DevTest Labs est le niveau d’autorisations fournies pour les membres de l’équipe qui utiliseront les laboratoires sur une base quotidienne.  Les autorisations courantes données sont [« Propriétaire » et « DevTest Labs User »](devtest-lab-add-devtest-user.md). Pour plus d’informations sur ces rôles, consultez [ajouter des propriétaires et des utilisateurs dans Azure DevTest Labs](devtest-lab-add-devtest-user.md).

## <a name="next-steps"></a>Étapes suivantes
Voir l’article suivant de cette série : [Mettre à l’échelle de votre infrastructure Azure DevTest Labs](devtest-lab-guidance-scale.md)
